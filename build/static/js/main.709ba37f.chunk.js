(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t.n(c),r=t(17),s=t.n(r),u=t(8),o=t(3),i=t(0),l=function(e){var n=e.handleSearch;return Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{children:"Filter shown with a:"}),Object(i.jsx)("input",{onChange:n})]})},d=function(e){var n=e.notification;return null===n.message?"":Object(i.jsx)("div",{style:n.succesfully?{backgroundColor:"whitesmoke",padding:"0 30px",border:"3px solid green",borderRadius:15,fontSize:20,maxWidth:500}:{backgroundColor:"whitesmoke",padding:"0 30px",border:"3px solid red",borderRadius:15,fontSize:20,maxWidth:500},children:Object(i.jsx)("p",{children:n.message})})},b=function(e){var n=e.handleSubmit,t=e.handleChangeName,c=e.handleChangeNumber,a=e.newName,r=e.newNumber;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{children:"Name:"}),Object(i.jsx)("input",{onChange:t,value:a})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{children:"Number:"}),Object(i.jsx)("input",{onChange:c,value:r})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.handleDelete;return Object(i.jsx)("button",{onClick:n,children:"Delete"})},j=function(e){var n=e.filteredPersons,t=e.handleDelete;return Object(i.jsx)("ul",{children:n.map((function(e){return Object(i.jsxs)("li",{style:{marginBottom:"10px"},children:[e.name," ",e.number,Object(i.jsx)("br",{}),Object(i.jsx)(h,{handleDelete:function(){return t(e.id)}})]},e.name)}))})},f=t(4),m=t.n(f),O="/api/persons",x=function(){return m.a.get(O).then((function(e){return e.data}))},g=function(e){return m.a.post(O,e).then((function(e){return e.data}))},p=function(e,n){return m.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},w=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),h=s[0],f=s[1],m=Object(c.useState)(""),O=Object(o.a)(m,2),w=O[0],y=O[1],C=Object(c.useState)(t),S=Object(o.a)(C,2),k=S[0],N=S[1],D=Object(c.useState)({message:null,succesfully:!0}),L=Object(o.a)(D,2),T=L[0],P=L[1];Object(c.useEffect)((function(){x().then((function(e){a(e),N(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(l,{handleSearch:function(e){var n=e.target.value.toLowerCase(),c=t.filter((function(e){return e.name.toLowerCase().includes(n)}));N(c)}}),Object(i.jsx)("h2",{children:"Add a new"}),Object(i.jsx)(b,{handleSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name.toLowerCase()===h.toLowerCase()})))return x().then((function(e){var n=e.filter((function(e){return e.name.toLowerCase()===h.toLowerCase()}));if(window.confirm("".concat(h," is already added to phonebook, replace the old number with a new one?"))){var t=Object(u.a)(Object(u.a)({},n[0]),{},{number:w});p(t.id,t).then((function(e){return console.log(e)})).catch((function(e){console.log(e),P({message:e.response.data.error,succesfully:!1})})),P({message:"".concat(h," has been succesfully updated"),succesfully:!0}),setTimeout((function(){P({message:null,succesfully:!0})}),5e3)}}));g({name:h,number:w}).then((function(e){a(t.concat(e)),f(""),y(""),P({message:"".concat(h," has been succesfully added"),succesfully:!0}),setTimeout((function(){P({message:null,succesfully:!0})}),5e3)})).catch((function(e){P({message:e.response.data.error,succesfully:!1}),setTimeout((function(){P({message:null,succesfully:!0})}),5e3),console.log(e.response.data.error)}))},handleChangeName:function(e){f(e.target.value)},newName:h,handleChangeNumber:function(e){y(e.target.value)},newNumber:w}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(d,{notification:T}),Object(i.jsx)(j,{filteredPersons:k,handleDelete:function(e){var n=k.filter((function(n){return n.id===e}));window.confirm("Delete ".concat(n[0].name))&&v(e).then((function(c){a(t.map((function(n){return n.id!==e?n:c})));var r="".concat(n[0].name," succesfully deleted!");P({message:r,succesfully:!0}),setTimeout((function(){P({message:null,succesfully:!0})}),5e3)}))}})]})};s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(w,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.709ba37f.chunk.js.map